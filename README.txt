# ИНСТРУКЦИЯ ПО УСТАНОВКЕ И ЗАПУСКУ ТЕЛЕГРАМ-БОТА ДЛЯ ОТЗЫВОВ

## ЧТО ДЕЛАЕТ БОТ?

Этот бот позволяет пользователям:
- Оставлять отзывы о продуктах или услугах
- Просматривать отзывы других пользователей 
- Ставить оценки продуктам по шкале от 1 до 5 звезд
- Администраторам получать статистику

## УСТАНОВКА НА WINDOWS

### Шаг 1: Установка Python 3.10

1. Скачайте Python 3.10.9 с официального сайта:
   - Перейдите по ссылке: https://www.python.org/downloads/release/python-3109/
   - Прокрутите страницу вниз до раздела "Files"
   - Выберите "Windows installer (64-bit)" для скачивания

2. Запустите скачанный файл
   - **ВАЖНО!** Поставьте галочку "Add Python 3.10 to PATH" перед установкой
   - Нажмите "Install Now"
   - Дождитесь завершения установки

3. Проверьте установку:
   - Откройте командную строку (нажмите Win+R, введите "cmd" и нажмите Enter)
   - Введите команду: `python --version`
   - Должно появиться сообщение "Python 3.10.9" (или похожая версия)

### Шаг 2: Скачивание и подготовка бота

1. Создайте папку для бота:
   - Откройте Проводник Windows
   - Создайте новую папку, например "telegram-bot", где вам удобно

2. Скопируйте файлы бота в эту папку:
   - Файл main.py
   - Файл config.py
   - Файл database.py
   - Файл handlers.py
   - Файл keyboards.py

3. Создайте файл .env:
   - Щелкните правой кнопкой мыши в папке с ботом
   - Выберите "Создать" -> "Текстовый документ"
   - Назовите его ".env" (обязательно с точкой в начале)
   - Если система не позволяет создать файл с таким именем, создайте "env.txt", а потом переименуйте его в ".env"

4. Откройте файл .env в Блокноте и введите:
   ```
   BOT_TOKEN=ваш_токен_бота
   ADMIN_IDS=ваш_числовой_id
   ```
   (О получении токена и ID - см. ниже)

### Шаг 3: Установка необходимых библиотек

1. Откройте командную строку (Win+R, введите "cmd", нажмите Enter)

2. Перейдите в папку с ботом:
   ```
   cd путь_к_вашей_папке
   ```
   Например: `cd C:\Users\Имя\Desktop\telegram-bot`

3. Создайте виртуальное окружение:
   ```
   python -m venv venv
   ```

4. Активируйте виртуальное окружение:
   ```
   venv\Scripts\activate
   ```

5. Обновите pip и установите необходимые библиотеки:
   ```
   python -m pip install --upgrade pip setuptools wheel
   pip install aiogram python-dotenv
   ```

### Шаг 4: Запуск бота

1. В той же командной строке с активированным окружением:
   ```
   python main.py
   ```

2. Если всё установлено правильно, вы увидите сообщения об инициализации бота
3. Теперь можно открыть Telegram и найти вашего бота

## УСТАНОВКА НА LINUX (Ubuntu/Debian)

### Шаг 1: Установка Python 3.10

1. Откройте терминал (Ctrl+Alt+T)

2. Обновите списки пакетов:
   ```
   sudo apt update
   ```

3. Установите необходимые инструменты:
   ```
   sudo apt install software-properties-common -y
   ```

4. Добавьте репозиторий с Python:
   ```
   sudo add-apt-repository ppa:deadsnakes/ppa -y
   ```

5. Установите Python 3.10:
   ```
   sudo apt install python3.10 python3.10-venv python3.10-dev -y
   ```

6. Проверьте установку:
   ```
   python3.10 --version
   ```

### Шаг 2: Скачивание и подготовка бота

1. Создайте папку для бота:
   ```
   mkdir ~/telegram-bot
   cd ~/telegram-bot
   ```

2. Скопируйте файлы бота в эту папку:
   - Если файлы бота у вас на компьютере, используйте любой доступный метод для копирования
   - Если файлы доступны через git, можно клонировать репозиторий

3. Создайте файл .env:
   ```
   nano .env
   ```

4. Введите в открывшийся редактор:
   ```
   BOT_TOKEN=ваш_токен_бота
   ADMIN_IDS=ваш_числовой_id
   ```
   Сохраните файл: Ctrl+O, затем Enter, затем Ctrl+X для выхода

### Шаг 3: Установка необходимых библиотек

1. Находясь в папке с ботом, создайте виртуальное окружение:
   ```
   python3.10 -m venv venv
   ```

2. Активируйте виртуальное окружение:
   ```
   source venv/bin/activate
   ```

3. Обновите pip и установите необходимые библиотеки:
   ```
   pip install --upgrade pip setuptools wheel
   pip install aiogram python-dotenv
   ```

### Шаг 4: Запуск бота

1. В том же терминале с активированным окружением:
   ```
   python main.py
   ```

2. Если всё установлено правильно, вы увидите сообщения об инициализации бота
3. Теперь можно открыть Telegram и найти вашего бота

## ПОЛУЧЕНИЕ ТОКЕНА БОТА

1. Откройте Telegram и найдите @BotFather (официальный бот для создания ботов)
2. Отправьте команду /newbot
3. Следуйте инструкциям:
   - Введите имя бота (будет отображаться в чатах)
   - Введите юзернейм бота (должен заканчиваться на "bot")
4. BotFather пришлет сообщение с токеном, он выглядит примерно так:
   `123456789:ABCdefGhIJklmNoPQRstUVwxYZ`
5. Скопируйте этот токен в файл .env вместо "ваш_токен_бота"

## ПОЛУЧЕНИЕ ID АДМИНИСТРАТОРА

1. Найдите бот @userinfobot в Telegram
2. Отправьте ему любое сообщение
3. Бот пришлет информацию о вас, включая ваш ID (числовой код)
4. Скопируйте этот ID в файл .env вместо "ваш_числовой_id"

## ИСПОЛЬЗОВАНИЕ БОТА

После запуска бота:

1. Найдите своего бота в Telegram (по имени, которое вы указали при создании)
2. Отправьте боту команду /start
3. Следуйте инструкциям бота

Доступные команды:
- /leave_feedback - оставить отзыв
- /view_feedback - просмотреть отзывы
- /rate - оценить продукт
- /stats - получить статистику (только для админов)

## ВОЗМОЖНЫЕ ПРОБЛЕМЫ И ИХ РЕШЕНИЯ

### 1. "python: command not found" (Linux)
Используйте `python3.10` вместо `python`

### 2. "ImportError: No module named 'aiogram'"
Убедитесь, что вы активировали виртуальное окружение перед запуском бота

### 3. "NameError: name 'InlineKeyboardBuilder' is not defined"
Проверьте, что в файле handlers.py есть строка импорта:
```python
from aiogram.utils.keyboard import InlineKeyboardBuilder
```

### 4. "RuntimeError: This event loop is already running"
Перезапустите командную строку/терминал и попробуйте снова

### 5. "Cannot connect to host api.telegram.org:443"
Проверьте подключение к интернету или попробуйте через VPN

### ПРИМЕЧАНИЕ ДЛЯ ПОСТОЯННОЙ РАБОТЫ БОТА

Эти инструкции запускают бота только пока запущена командная строка/терминал.
Для постоянной работы бота на сервере потребуется настройка системного сервиса.